# Cube3D
Совместный геймдев проект @wyholger и @bpatrici написанный на Си.

Реализация механизма рейкастинга с помощью графической библиотеки mlx.

![cub3D](gif/video.gif)

Рекастинг позволяет создать эмитацию 3D пространства с видом от первого лица.

Персонаж у которого есть угол обзора, бросает много лучей в рамках своего угла обзора.

Цель каждого луча вычислить расстояние от персонажа до ближайшего препятствия (например стены).

![](gif/Screen_1.png)

Зная это расстояние можно вычислить относительную высоту этого препятствия с учетом перспективы.

![](gif/Screen_2.png)

Я оптимизировал вычисленя каждого луча используя правила тригонометрии. 

Что позволило мне делать вычисление местонахождения окончания луча не каждый фиксированный шаг, а только в местах пересечения луча с вертикальной осью координат, или с горизонтальной.

Что существенно ускоряет работу программы и увеличивает точность вычислений.

Красными точками показаны места где вычисляется длина луча и узнается не долетел ли он до препятствия.

![](gif/Screen_3.png)

Вот визуализация вычислений для одного луча.

Желтые точки - перечечения с вертикальной осью.

Красные точки - пересечения с горизонтальной осью.

![](gif/Screen_4.png)

Также в проекте реализованы наложение на стены текстур пути до которых можно прописать в конфигурационном файле карты.

Файл карты должен подаваться аргументом программе ./cub3d <path_to_map>

Файл карты должен содержать:

`NO <path_to_texture_file>` - путь до текстуры северных стен

`SO <path_to_texture_file>` - путь до текстуры южных стен

`WE <path_to_texture_file>` - путь до текстуры западных стен

`EA <path_to_texture_file>` - путь до текстуры восточных стен

`C  20,83,150`              - цветовые настройки (R,G,B) пола.

`F  225,245,0`              - цветовые настройки (R,G,B) неба.

```111111                    - Карта, где 1 это стены

100001                    - 0 это свободное пространство

100N01111                 - и 1 из символов ('N', 'S', 'W', 'E')

101000001                 - обозначающих стартовую точку персонажа

111111111                 - и направление его взгляда.```

Сборка на macOS make

Запуск ./cub3D maps/map_0.cub

